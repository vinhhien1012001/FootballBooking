<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="keywords" content="">
        <meta name="description" content="">
        <meta name="author" content="">
        <link rel="icon" type="image/png" sizes="16x16" href="../plugins/images/favicon.png">
        <title>Cubic Admin Template</title>
        <!-- ===== Bootstrap CSS ===== -->
        <link href="bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
        <!-- ===== Plugin CSS ===== -->
        <link href="../plugins/components/morrisjs/morris.css" rel="stylesheet">
        <!-- ===== Animation CSS ===== -->
        <link href="css/animate.css" rel="stylesheet">
        <!-- ===== Custom CSS ===== -->
        <link href="css/style.css" rel="stylesheet">
        <!-- ===== Color CSS ===== -->
        <link href="css/colors/green-dark.css" id="theme" rel="stylesheet">
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    </head>

    <body class="mini-sidebar">
        <!-- Preloader -->
        <div class="preloader">
            <div class="cssload-speeding-wheel"></div>
        </div>
        <div id="wrapper">
            <!-- ===== Top-Navigation ===== -->
            <nav class="navbar navbar-default navbar-static-top m-b-0">
                <div class="navbar-header">
                    <a class="navbar-toggle font-20 hidden-sm hidden-md hidden-lg " href="javascript:void(0)"
                        data-toggle="collapse" data-target=".navbar-collapse">
                        <i class="fa fa-bars"></i>
                    </a>
                    <div class="top-left-part">
                        <a class="logo" href="/dashboard">
                            <b>
                                <img src="/plugins/images/logo.png" alt="home" />
                            </b>
                            <span>
                                <img src="/plugins/images/logo-text.png" alt="homepage" class="dark-logo" />
                            </span>
                        </a>
                    </div>

                </div>
            </nav>
            <!-- ===== Top-Navigation-End ===== -->
            <!-- ===== Left-Sidebar ===== -->
            <aside class="sidebar" role="navigation">
                <div class="scroll-sidebar">
                    <div class="user-profile">
                        <div class="dropdown user-pro-body">
                            <div class="profile-image">
                                <img src="/plugins/images/users/hanna.jpg" alt="user-img" class="img-circle">
                                <a href="javascript:void(0);" class="dropdown-toggle u-dropdown text-blue"
                                    data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                    <span class="badge badge-danger">
                                        <i class="fa fa-angle-down"></i>
                                    </span>
                                </a>
                                <ul class="dropdown-menu animated flipInY">
                                    <li><a href="javascript:void(0);"><i class="fa fa-user"></i> Profile</a></li>
                                    <li><a href="javascript:void(0);"><i class="fa fa-inbox"></i> Inbox</a></li>
                                    <li role="separator" class="divider"></li>
                                    <li><a href="javascript:void(0);"><i class="fa fa-cog"></i> Account Settings</a>
                                    </li>
                                    <li role="separator" class="divider"></li>
                                    <li><a href=""><i class="fa fa-power-off"></i> Logout</a></li>
                                </ul>
                            </div>
                            <p class="profile-text m-t-15 font-16"><a href="javascript:void(0);"> Hanna Gover</a></p>
                        </div>
                    </div>
                    <nav class="sidebar-nav">
                        <ul id="side-menu">
                            <li>
                                <a class="waves-effect" href="/dashboard" aria-expanded="false"><i
                                        class="icon-screen-desktop fa-fw"></i> <span class="hide-menu"> Dashboard <span
                                            class="label label-rounded label-info pull-right">3</span></span></a>
                            </li>
                            <li>
                                <a class="active waves-effect" href="javascript:void(0);" aria-expanded="false"><i
                                        class="icon-basket fa-fw"></i> <span class="hide-menu"> Stadium </span></a>
                                <ul aria-expanded="false" class="collapse">
                                    <li> <a href="/stadium/add">Add Stadium</a> </li>
                                    <li> <a href="/stadium">List Stadium</a> </li>
                                    <li> <a href="/stadium/pitches/add">Add Pitch</a> </li>
                                </ul>
                            </li>
                            <li>
                                <a class="waves-effect" href="javascript:void(0);" aria-expanded="false"><i
                                        class="icon-envelope-letter fa-fw"></i> <span class="hide-menu"> Ticket <span
                                            class="label label-rounded label-primary pull-right">5</span></span></a>
                                <ul aria-expanded="false" class="collapse">
                                    <li> <a href="/ticket/show-ticket">List ticket</a> </li>
                                </ul>
                            </li>
                        </ul>
                    </nav>

                </div>
            </aside>
            <!-- ===== Left-Sidebar-End ===== -->
            <!-- Page Content -->
            <div class="page-wrapper">
                <!-- ===== Page-Content ===== -->
                <div class="page-wrapper">
                    <div class="row m-0">
                        <div class="col-md-4 col-sm-6 info-box">
                            <div class="media">
                                <div class="media-left">
                                    <span class="icoleaf bg-primary text-white"><i
                                            class="mdi mdi-checkbox-marked-circle-outline"></i></span>
                                </div>
                                <div class="media-body">
                                    <h3 class="info-count text-blue">{{data.countTicket}}</h3>
                                    <p class="info-text font-12">Tickets</p>
                                    <span class="hr-line"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 info-box">
                            <div class="media">
                                <div class="media-left">
                                    <span class="icoleaf bg-primary text-white"><i
                                            class="mdi mdi-comment-text-outline"></i></span>
                                </div>
                                <div class="media-body">
                                    <h3 class="info-count text-blue">{{data.countUser}}</h3>
                                    <p class="info-text font-12">Users</p>
                                    <span class="hr-line"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 info-box">
                            <div class="media">
                                <div class="media-left">
                                    <span class="icoleaf bg-primary text-white"><i class="mdi mdi-coin"></i></span>
                                </div>
                                <div class="media-body">
                                    <h3 class="info-count text-blue">{{data.total}}</h3>
                                    <p class="info-text font-12">Earning</p>
                                    <span class="hr-line"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-xs-12">
                            <div class="white-box">
                                <h3 class="box-title">Chart</h3>
                                <div id="morris-bar-chart"></div>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- ===== Page-Content-End ===== -->
                <!-- /.container-fluid -->
                <footer class="footer t-a-c">
                    © 2017 Cubic Admin
                </footer>
            </div>
            <!-- /#page-wrapper -->
        </div>
        <input type="hidden" id="dataChart" value={{jsonString data.countTicketMonth}} />
        <!-- /#wrapper -->
        <!-- jQuery -->
        <script src="/plugins/components/jquery/dist/jquery.min.js"></script>
        <!-- Bootstrap Core JavaScript -->
        <script src="bootstrap/dist/js/bootstrap.min.js"></script>
        <!-- Menu Plugin JavaScript -->
        <script src="js/sidebarmenu.js"></script>
        <!--slimscroll JavaScript -->
        <script src="js/jquery.slimscroll.js"></script>
        <!--Wave Effects -->
        <script src="js/waves.js"></script>
        <!-- Custom Theme JavaScript -->
        <script src="js/custom.js"></script>
        <!--Morris JavaScript -->
        <script src="/plugins/components/raphael/raphael-min.js"></script>
        <script src="/plugins/components/morrisjs/morris.js"></script>
        <script>
            $(function () {

                "use strict";
                // Morris bar chart

                var data = document.getElementById("dataChart").value;
                data = JSON.parse(data)

                var monthNames = [
                    'January',
                    'February',
                    'March',
                    'April',
                    'May',
                    'June',
                    'July',
                    'August',
                    'September',
                    'October',
                    'November',
                    'December'
                ];

                const currentYear = new Date().getFullYear();



                // Chuyển đổi dữ liệu theo định dạng phù hợp
                var formattedData = [];
                for (var i = 1; i <= 12; i++) {
                    var monthData = data.find(item => item._id === i);
                    var monthCount = monthData ? monthData.count : 0;
                    var monthTotalAmount = monthData ? monthData.totalAmount : 0;
                    formattedData.push({ y: monthNames[i - 1], b: monthCount, c: monthTotalAmount });
                }


                Morris.Bar({
                    element: 'morris-bar-chart',
                    data: formattedData,
                    xkey: 'y',
                    ykeys: ['b', 'c'],
                    labels: ["Number of tickets", "Total amount"],
                    barColors: ["#2ecc71", '#0283cc'],
                    hideHover: 'auto',
                    gridLineColor: '#e0e0e0',
                    resize: true
                });

            });

        </script>
        <!--Style Switcher -->
        <script src="../plugins/components/styleswitcher/jQuery.style.switcher.js"></script>
    </body>

</html>